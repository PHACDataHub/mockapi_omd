# NML - OMD Data Bridge

## Introduction :
The National Microbiology Laboratory (NML) has petabytes of data generated by genome sequencers, electron microscopes and other laboratory equipment. Making this data accessible to other groups in PHAC is a priority and Outbreak Management Division (OMD) was selected as the initial group to work with, to advance this interoperability work.

## Current scenario :
 In current scheme of things, OMD receives weekly data extracts of Isolates and Clusters data from the NML. The files are provided to OMD in two ways :
1)	The files are uploaded to a CNPHI platform called CLSN by the NML and are then downloaded by OMD. 
2)	The Isolate data is saved in a table in OMD's Access database for access and report generation. Currently In CEDARS (OMD's new system), there has been a table created to store the Isolate data.
In addition to this NML has highlighted that they would benefit from having some fields from CEDARS transferred to them weekly to add to their data set.

## Proposed scenario :
It would therefore be ideal for the two systems to come up with an automated way to provide these data extracts that minimizes the need for manual data entry or manual data upload. Using GraphQL APIs was therefore proposed as a potential solution which can very efficiently solve the problem at hand in this case. Working ahead with this approach a demo API was developed to showcase how using a GraphQL API gives user the flexibility to :
1)	Fetch data points as per their requirements without having to filter out the excessive data returned by the server or having to make additional API calls to get the required data.
2)	Rename the data fields as per their suitability , in the API response without making any code changes.



### Mock API for rendering dummy data

Included in this repo is a small application that demonstartes provisioning dummy data for isolates and clusters using GraphQL.
This application is curently deployed as a container image on Google Cloud Run service and can be accessed via url:- https://omd-mockapi-6ef5a33mba-nn.a.run.app/

Alternatively docker image can be built locally using the Dockerfile available in this repo using the command:-
`sudo docker build -t "mockapi:1.0 .`

This command builds an image locally with a name mockapi and version 1.0 which can then be run as :- ` sudo docker run -d -p 8000:8080 mockapi:1.0`
After this the application can be accessed at:- http://localhost:8000/
